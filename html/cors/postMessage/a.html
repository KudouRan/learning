<!DOCTYPE html>
<html lang="zh-cmn-Hans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>a页面</title>
  </head>
  <body>
    <iframe src="http://127.0.0.1:4002/postMessage/b.html"></iframe>
    a页面
    <script>
      const iframe = document.getElementsByTagName('iframe')[0];

      iframe.onload = () => {
        iframe.contentWindow.postMessage('你好啊', 'http://127.0.0.1:4002/');

        //下面这种不行
        // window.postMessage('你好啊', 'http://127.0.0.1:4002/');
      };

      //不过可以在自己这发给自己
      window.postMessage('自己给自己说,你好啊', 'http://127.0.0.1:4001/');

      window.addEventListener('message', (event) => {
        console.log(`来自${event.origin} 的消息: ${event.data}`);
      });
    </script>
  </body>
</html>
